syntax = "proto3";

package com.xigua.api.service;
option java_multiple_files = true;
option java_package = "com.xigua.api.service";
option java_outer_classname = "AIServiceProto";

// 定义请求参数
message ChatRequest {
  string input = 1;   // 输入的内容
  bool stream = 2;    // 是否开启流式返回
  string prompt = 3;
}

// 定义响应结果
message ChatResponse {
  string output = 1;    // 输出的内容
}

message IntentRequest {
  string input = 1;
}

enum IntentType {
  UNKNOWN = 0;
  TEXT_TO_TEXT = 1;
  USE_TOOL = 2;

  // 其他暂时不考虑
//  TEXT_TO_IMAGE = 3;
//  TEXT_TO_VIDEO = 4;
}

message IntentResponse {
  IntentType intent = 1;
}

message AgentRequest {
  string input = 1;
  bool stream = 2;
}

message AgentResponse {
  string output = 1;
}


// 定义服务
service AIService {
  // 如果需要流式，可以这样写：返回 stream
  rpc Chat(ChatRequest) returns (stream ChatResponse);

  rpc DetectIntent(IntentRequest) returns (IntentResponse);

  rpc AgentProcess(AgentRequest) returns (stream AgentResponse);
}
